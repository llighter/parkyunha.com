---
title: 'Springìœ¼ë¡œ HTTP í´ë¼ì´ì–¸íŠ¸ ë§Œë“¤ê¸°'
publishedAt: '2023-07-01'
category: 'ë¸”ë¡œê·¸'
summary: 'Spring HTTP ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°„ë‹¨íˆ ë§Œë“¤ì–´ë³´ì'
image: '/images/http-interface/server_to_server.jpeg'
imageDescription: 'HTTP í†µì‹ ì„ í†µí•´ ì„œë²„ì™€ ì„œë²„ ê°„ì— ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.'
---

ê³ ê°ì—ê²Œ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ëŠ” ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•œë‹¤ê³  ìƒê°í•´ë³´ì. ê³ ê°ì—ê²Œ ì œê³µí•  ì •ë³´ë¥¼ ìš°ë¦¬ ì„œë¹„ìŠ¤ê°€ ëª¨ë‘ ê°€ì§€ê³  ìˆë‹¤ë©´ DBë¥¼ ì¡°íšŒí•´ì„œ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ë©´ëœë‹¤. í•˜ì§€ë§Œ ê³ ê°ì—ê²Œ ì œê³µí•  ì •ë³´ì¤‘ ì¼ë¶€ëŠ” ì™¸ë¶€ì—ì„œ ê°€ì ¸ì™€ì•¼í•œë‹¤ë©´ ì™¸ë¶€ ì„œë²„ì™€ í†µì‹ ì„ í•´ì•¼ í•œë‹¤. ì›¹ í™˜ê²½ì—ì„œ í†µì‹ ì€ ëŒ€ë¶€ë¶„ HTTP API ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. ì´ ë•Œ ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì´ê¸° ë•Œë¬¸ì— ì„œë¹„ìŠ¤ ë‚´ë¶€ì— HTTP í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬ì„±í•´ì•¼ í•œë‹¤. ìŠ¤í”„ë§ì—ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ ê·¸ ì¤‘ì— ìµœê·¼ì— ë‚˜ì˜¨ HTTP Interfaceë¥¼ í™œìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì.

> ì´ ê¸€ì—ì„œ ì„¤ëª…í•˜ëŠ” ì˜ˆì œëŠ” Den Vegaì˜ ìœ íŠœë¸Œ [Spring HTTP Interface Clients: Consuming HTTP services in Spring Boot](https://youtu.be/4U0hUyktpvg)ì—ì„œ ë”°ë¼í•´ë³¼ ìˆ˜ ìˆê³  ì†ŒìŠ¤ì½”ë“œëŠ” Github [http-interfaces](https://github.com/danvega/http-interfaces)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## í™˜ê²½

[HTTP Interface](https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-http-interface)ëŠ” ìŠ¤í”„ë§ 6 ë²„ì „ ì´í›„ë¶€í„° ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì—ì„œëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ 3.1 ë²„ì „(ìŠ¤í”„ë§ 6)ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

## ë°ëª¨ êµ¬ì„±ë„

ì™¸ë¶€ì— ì„œë¹„ìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ì„œë²„ì¸ **article-service**ì™€ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì£¼ëŠ” ì„œë²„ì¸ **content-service**ë¡œ ì´ ë‘ ê°œì˜ ì„œë²„ë¡œ êµ¬ì„±í•  ê²ƒì´ë‹¤. ê°ê°ì˜ ì„œë²„ëŠ” í•œ í”„ë¡œì íŠ¸ ë‚´ì˜ ëª¨ë“ˆë¡œ êµ¬ì„±í•˜ì—¬ í•œ ì†ŒìŠ¤ ë‚´ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.

<Image alt={`project map`} src={`/images/http-interface/project-map.png`} aspect={928 / 612}/>

## article service ë§Œë“¤ê¸°

**content-service**ì— ì •ë³´ë¥¼ ì œê³µí•´ì£¼ëŠ” **article-service**ëŠ” `article`ì´ë¼ëŠ” ë°ì´í„° í´ë˜ìŠ¤(`ID`ì™€ `title` ê·¸ë¦¬ê³  `body`ë¡œ êµ¬ì„±)ë¡œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤.

```java title="model/Article.java"
package com.llighter.articleservice.model;

public record Article(Integer id, String title, String body) {
}
```

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” `@PostConstuct` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ `init()` ë©”ì†Œë“œì—ì„œ ì¸ë©”ëª¨ë¦¬ì— `article` ë¦¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•œë‹¤.
ê·¸ë¦¬ê³  ê¸°ë³¸ì ì¸ ì¡°íšŒ, ìˆ˜ì •, ìƒì„±, ì‚­ì œ APIë¥¼ ì œê³µí•˜ë„ë¡ êµ¬ì„±í•˜ì˜€ë‹¤.

### article controller

```java title="controller/ArticleController.java"
@RestController
@RequestMapping("/api/articles")
public class ArticleController {

    private final List<Article> articles = new ArrayList<>();

    @GetMapping
    public List<Article> findAll() {
        return articles;
    }

    @GetMapping("/{id}")
    public Optional<Article> findById(@PathVariable Integer id) {
        return articles.stream().filter(article -> article.id().equals(id)).findFirst();
    }

    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)
    public void create(@RequestBody Article article) {
        articles.add(article);
    }

    @PutMapping("/{id}")
    @ResponseStatus(HttpStatus.NO_CONTENT)
    public void update(@RequestBody Article article, @PathVariable Integer id) {
        Optional<Article> currentArticle = articles.stream().filter(a -> a.id().equals(id)).findFirst();
        currentArticle.ifPresent(value -> articles.set(articles.indexOf(value), article));
    }

    @DeleteMapping("/{id}")
    @ResponseStatus(HttpStatus.NO_CONTENT)
    public void delete(@PathVariable Integer id) {
        articles.removeIf(article -> article.id().equals(id));
    }


    @PostConstruct
    private void init() {
        articles.add(new Article(1, "Hello, World!", "This is my first blog post"));
    }
}

```

ì¶”ê°€ì ìœ¼ë¡œ ì´í›„ì— êµ¬ì„±í•  **content-service**ì™€ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì„œë²„ ê¸°ë³¸ í¬íŠ¸ë¥¼ **8081**ìœ¼ë¡œ ë°”ê¿”ë‘ì.

```properties title="application.properties"
server.port=8081
```

### article service í…ŒìŠ¤íŠ¸

**article-service**ê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ HTTP ìš”ì²­ì„ í•´ë³´ì. HTTP ìš”ì²­ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” [í¬ìŠ¤íŠ¸ë§¨](https://www.postman.com/)ê³¼ ê°™ì€ ë³„ë„ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ë„ ë˜ê³  [cURL](https://ko.wikipedia.org/wiki/CURL)ì´ë‚˜ [http-pie](https://httpie.io/) ê°™ì€ í„°ë¯¸ë„ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ë„ ëœë‹¤. ì—¬ê¸°ì—ì„œëŠ” intellij í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” [HTTP Clinet](https://plugins.jetbrains.com/plugin/13121-http-client)ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

```http request title="article.http"
### ëª¨ë“  article ì¡°íšŒ
GET http://localhost:8081/api/articles

### íŠ¹ì • article ì¡°íšŒ
GET http://localhost:8081/api/articles/1

### ìƒˆë¡œìš´ article ìƒì„±
POST http://localhost:8081/api/articles
Content-Type: application/json

{
  "id": 2,
  "title": "Article 2",
  "body": "My Second blog post"
}

### ê¸°ì¡´ article ìˆ˜ì •
PUT http://localhost:8081/api/articles/2
Content-Type: application/json

{
  "id": 2,
  "title": "Article 2",
  "body": "I have updated my 2nd blog post!"
}
```

ì„œë²„ë¥¼ ì˜¬ë¦¬ê³  í…ŒìŠ¤íŠ¸ ì½œì„ í˜¸ì¶œí•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ í˜¸ì¶œì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ì•„ë˜ ë¡œê·¸ëŠ” ì „ì²´ article ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ìš”ì²­ì´ê³  ê¸°ë³¸ì ìœ¼ë¡œ í•œ ê°œì˜ ê°’ë§Œì„ ë“±ë¡í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— í•œ ê±´ì´ ì¡°íšŒëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```http request title="http log"
GET http://localhost:8081/api/articles

HTTP/1.1 200
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sat, 01 Jul 2023 11:53:49 GMT
Keep-Alive: timeout=60
Connection: keep-alive

[
  {
    "id": 1,
    "title": "Hello, World!",
    "body": "This is my first blog post"
  }
]
```

## content service ë§Œë“¤ê¸°

ì, ì´ì œ í˜¸ì¶œí•  **aricle-service**ë¥¼ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸ê¹Œì§€ í•´ë´¤ìœ¼ë‹ˆ **content service**ë¡œ HTTP í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‘ì„±í•´ë³´ì.

**article-service**ì—ì„œë„ `article`ì´ë¼ëŠ” ë°ì´í„° í´ë˜ìŠ¤(`ID`ì™€ `title` ê·¸ë¦¬ê³  `body`ë¡œ êµ¬ì„±)ë¡œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ”ê²ƒê³¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¡°íšŒ, ìˆ˜ì •, ìƒì„±, ì‚­ì œ APIë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ë™ì¼í•˜ë‹¤. ë‹¤ë§Œ, `article-service`ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì´ê³  ë°ì´í„°ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ì¸ `article-service`ì—ì„œ ê°€ì ¸ì˜¨ë‹¤ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.

### content controller

```java title="controller/ContentController.java"
@RestController
@RequestMapping("/api/content")
public class ContentController {

    public final ArticleClient articleClient;

    public ContentController(ArticleClient articleClient) {
        this.articleClient = articleClient;
    }

    @GetMapping("/articles")
    public List<Article> findAllArticles() {
        return articleClient.findAll();
    }

    @GetMapping("/articles/{id}")
    public Optional<Article> findById(@PathVariable Integer id) {
        return articleClient.findOne(id);
    }

    @PostMapping("/articles")
    public void create(@RequestBody Article article) {
        articleClient.create(article);
    }

    @PutMapping("/articles/{id}")
    public void update(@RequestBody Article article, @PathVariable Integer id) {
        articleClient.update(article, id);
    }

    @DeleteMapping("/articles/{id}")
    public void delete(@PathVariable Integer id) {
        articleClient.delete(id);
    }
}
```

### article client

ìœ„ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ í•„ìš”í•œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í–ˆëŠ”ë° ì´ í´ë¼ì´ì–¸íŠ¸ëŠ” ì–´ë…¸í…Œì´ì…˜ ë©”ì†Œë“œ(ì˜ˆ. `@GetExchange`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë°” ì¸í„°í˜ì´ìŠ¤ë¡œ HTTP ìš”ì²­ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```java title="ArticleClient.java"
public interface ArticleClient {

    @GetExchange("/articles")
    List<Article> findAll();

    @GetExchange("/articles/{id}")
    Optional<Article> findOne(@PathVariable Integer id);

    @PostExchange("/articles")
    void create(@RequestBody Article article);

    @PutExchange("/articles/{id}")
    void update(@RequestBody Article article, @PathVariable Integer id);

    @DeleteExchange("/articles/{id}")
    void delete(@PathVariable Integer id);
}
```

### client config

ì´ë ‡ê²Œ `@HttpExchange` ë©”ì†Œë“œë“¤ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³  **config**ì—ì„œ í”„ë¡ì‹œë¥¼ ë§Œë“¤ì–´ì„œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì£¼ì…ì„ ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java title="config/ClientConfig.java"
@Configuration
public class ClientConfig {

    @Bean
    ArticleClient articleClient() {
        WebClient client = WebClient.builder()
                .baseUrl("http://localhost:8081/api")
                .build();
        HttpServiceProxyFactory factory = HttpServiceProxyFactory.builder(WebClientAdapter.forClient(client)).build();
        return factory.createClient(ArticleClient.class);
    }
}
```

### content service í…ŒìŠ¤íŠ¸

ì ì´ì œ `content-service`ë„ ì‹¤í–‰í•´ì„œ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

<Image alt={`get all articles`} src={`/images/http-interface/article-service-get-all-articles.png`}
       aspect={1126 / 598}/>

```http request title="content.http"
### ëª¨ë“  article ì¡°íšŒ
GET http://localhost:8080/api/content/articles

### íŠ¹ì • article ì¡°íšŒ
GET http://localhost:8080/api/content/articles/1

### ìƒˆë¡œìš´ article ìƒì„±
POST http://localhost:8080/api/content/articles
Content-Type: application/json

{
  "id": 2,
  "title": "My 2nd Post",
  "body": "My Second blog post"
}

### ê¸°ì¡´ article ìˆ˜ì •
PUT http://localhost:8080/api/content/articles/2
Content-Type: application/json

{
  "id": 2,
  "title": "My 2nd Post",
  "body": "I have updated my 2nd blog post!"
}

### ê¸°ì¡´ article ì‚­ì œ
DELETE http://localhost:8080/api/content/articles/2
```

ì•„ë˜ ë¡œê·¸ëŠ” íŠ¹ì • article ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ìš”ì²­ì´ë‹¤.

```http request title="http log"
GET http://localhost:8080/api/content/articles/1

HTTP/1.1 200
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sat, 01 Jul 2023 12:08:02 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
  "id": 1,
  "title": "Hello, World!",
  "body": "This is my first blog post"
}
```

## ì •ë¦¬

ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ì„ ìœ„í•´ **HTTP API(REST endpoints)** ë¥¼ í˜¸ì¶œí•˜ê¸°ìœ„í•´ì„œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” 3ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë° ê·¸ ì¤‘ **HTTP Interface**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•´ë³´ì•˜ë‹¤.

ìš”ì¦˜ì€ ê³ ê°ì—ê²Œ ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë”ë¼ë„ ìì²´ì ìœ¼ë¡œ ëª¨ë“  ê²ƒì„ ì œê³µí•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³  ëŒ€ë¶€ë¶„ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì—°ë™í•˜ì—¬ ì œê³µí•˜ëŠ” ê²½ìš°ê°€ ì¼ë°˜ì ì´ë‹¤. ê¸ˆìœµì—ì„œë„ ëŒ€ì¶œ, ë Œíƒˆ, ë³´í—˜ ë“± ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ ì—¬ëŸ¬ ê¸ˆìœµì‚¬ì™€ ì—°ê³„í•˜ì—¬ í•œ ê³³ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í˜•íƒœê°€ ì¼ë°˜í™” ë˜ì—ˆë‹¤. ì¶”í›„ì—ëŠ” ì´ë²ˆì— ì‘ì„±í•œ **HTTP Interface**ë¥¼ í™œìš©í•˜ì—¬ ì™¸ë¶€ ëŒ€ì¶œ ì„œë¹„ìŠ¤ë¡œ ë¶€í„° ê³ ê°ì˜ ëŒ€ì¶œ ê°€ëŠ¥ì—¬ë¶€ë¥¼ ì¡°íšŒí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì. ğŸ‘‹ğŸ»



> ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ HTTP APIë¥¼ í˜¸ì¶œí•˜ëŠ” [3ê°€ì§€ ë°©ë²•](https://docs.spring.io/spring-framework/reference/integration/rest-clients.html): WebClient, RestRemplate, HTTP Interface
